<siu-data-grid
  [loading]="loading"
  [source]="source"
  [definition]="gridDefinition"
  (on-load-data)="handleLoadData($event)"
  (on-click-button)="handleClickButton($event)"
>
  <ng-container *ngFor="let item of gridDefinition.columns; let i = index;">
    <ng-template
      [siuTemplate]="item.field"
      let-row
      let-rowIndex="rowIndex"
    >
      <ng-container *ngIf="definition.columns[i].editable;else normalField">
        <ng-container *ngIf="rowsValues[rowIndex].edit; else normalField">

          <ng-container [ngSwitch]="definition.columns[i].controlType">
            <input
              *ngSwitchCase="'text'"
              type="text"
              [(ngModel)]="rowsValues[rowIndex].value[item.field]"
            >

            <select
              *ngSwitchCase="'select'"
              [(ngModel)]="rowsValues[rowIndex].value[item.field]"
              (change)="handleChangeRowSelect(item.field, rowIndex, rowsValues[rowIndex].value)"
            >
              <option [ngValue]="null">-Seleccione-</option>
              <option
                [ngValue]="opt.value"
                *ngFor="let opt of rowsValues[rowIndex].options[item.field]"
              >{{opt.label}}</option>
            </select>

          </ng-container>


        </ng-container>
      </ng-container>

      <ng-template #normalField>
        {{row[item.field]}}
      </ng-template>
    </ng-template>
  </ng-container>

</siu-data-grid>
